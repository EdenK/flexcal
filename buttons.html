<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Flexcal Buttons</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" href="stylesheets/prism-dw.css" />
 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/i18n/datepicker-fr.js"></script>
	<script src="https://cdn.rawgit.com/dwachss/prism/gh-pages/prism.js"></script>
    <script src="javascripts/scale.fix.js"></script>
    <script src="javascripts/prism.linenumber.js"></script>
	<script src="loadflexcal.js"></script>
	<style>
		div.example {
			display: inline-block;
			vertical-align: top;
		}
	</style>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Flexcal</h1>
        <p>jQuery UI datepicker</p>

        <p class="view"><a href="https://github.com/dwachss/flexcal">View the Project on GitHub <small>dwachss/flexcal</small></a></p>


        <ul>
          <li><a href="https://github.com/dwachss/flexcal/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/dwachss/flexcal/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/dwachss/flexcal">View On <strong>GitHub</strong></a></li>
        </ul>
		<nav>
		</nav>
      </header>
      <section>
<h1>Flexcal Buttons</h1>
<p>I apologize for the French; I had to use Google translate for some of this.</p>
<h2 id=introduction>Introduction</h2>
<p>Though I don't really like them, I've had requests for things like a "Today" button in the calendar. So there is a <code class=language-html>&lt;div&gt;</code> at the bottom of the calendar with <code>class=ui-datepicker-buttonpane</code> for putting them in. The <a href=options.html#buttons><code>buttons</code></a> option is an array of elements or button description strings to insert. The simplest ones are <code class=language-javascript>['today']</code> for a button that switches the calendar to today's date, and  <code class=language-javascript>['today commit']</code> to "commit" to today's date, entering it in the attached input box and closing the calendar:</p>
<code class=language-javascript>['today']</code>: <input id=1>
<script class=demo>
flexcalReady.then(function(){
	$('#1').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#1'),
		buttons: ['today']
	});
});
</script>
<br /><code class=language-javascript>['today commit']</code>: <input id=2>
<script class=demo>
flexcalReady.then(function(){
	$('#2').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#2'),
		buttons: ['today commit']
	});
});
</script>
<h2>The <code>buttons</code> array</h2>
<p>Each item in the <code>buttons</code> array is appended to the buttonpane <code class=language-html>&lt;div&gt;</code>. If it is anything but a string, it is appended straight:</p>
<input id=3>
<script class=demo>
var smileyURL = 'http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Smiley.svg/200px-Smiley.svg.png';
flexcalReady.then(function(){
	$('#3').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#3'),
		buttons: [$('<span>&copy; 2015 Me</span>'), $('<img>').attr('src', smileyURL).height(25)]
	});
});
</script>
<p>You can use regular elements and jQuery UI buttons and checkboxes. To get the flexcal element, the enclosing button pane, which is a <code class=language-html>&lt;div class="ui-datepicker-buttonpane"&gt;</code>, has jQuery data attached with key 'flexcal' of:</p>
<pre><code class=language-javascript>{
	element: // the attached input element
	widget: // the &lt;div&gt; that contains the calendar
	instance: // the flexcal object itself
}</code></pre>
<p>Thus, using regular elements:</p>
<input id=4>
<script class=demo>
var hidetabs = $('<label><input type=checkbox /> Hide Tabs</label>');
hidetabs.find('input').on('change', function(){
	var element = $(this).parents('.ui-datepicker-buttonpane').data('flexcal').element;
	element.flexcal('option', 'hidetabs', $(this).is(':checked'));
});
flexcalReady.then(function(){
	$('#4').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#4'),
		buttons: [hidetabs]
	});
});</script>
<p>Or, using the jQuery UI <a href=http://jqueryui.com/button/#checkbox>button plugin</a>:</p>
<input id=5>
<script class=demo>
// bug in jQuery UI button requires label for/id rather than wrapping
var hidetabs2 = $('<input type=checkbox id=5a /> <label for=5a>Hide Tabs</label>').appendTo('body');
flexcalReady.then(function(){
	$('#5').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#5'),
		buttons: [hidetabs2]
	});
});
$('#5a').button().on('change', function(){
	var element = $(this).parents('.ui-datepicker-buttonpane').data('flexcal').element;
	element.flexcal('option', 'hidetabs', $(this).is(':checked'));
});
</script>
<p>I have to admit, I do not like the jQuery UI buttons much and have no intention of using them.</p>
<p>If the item in the <code>buttons</code> is a string, then a new <code class=language-html>&lt;button&gt;</code> is created and given a class list of that string. The first word (space-delimited) in that string is used as the "data-flexcal-l10n" attribute. This means that these buttons are localized with the flexcal <a href=l10n.html#text>text localization</a>. So <code class=language-javascript>buttons: ['today commit big']</code> creates <code class=language-html>&lt;button class="today commit big" data-flexcal-l10n="today"&gt;</code> and the text of the button as displayed will be the <code>todayText</code> of the current <a href=l10n.html>localization object</a>. The assigned classes can be used for styling and for assigning actions. For example, the "today" and "close" actions are predefined as:</p>
<pre><code class=language-javascript>$('body').on('click', '.ui-flexcal button.today', function(){
	var instance = $.data(this.parentNode, 'flexcal').instance;
	if (this.classList.contains('commit')){
		instance._commit(new Date);
	}else{
		instance._setDate(new Date);
	}
});
$('body').on('click', '.ui-flexcal button.close', function(){
	var instance = $.data(this.parentNode, 'flexcal').instance;
	if (this.classList.contains('commit')){
		instance._commit();
	}else{
		instance.hide();
	}
});</code></pre>
<p><strong>Note that these attach the event handlers to the body element, so the body element must exist when the code is included. Don't put the <code class=language-html>&lt;script src=jquery.flexcal.js&gt;</code> in the head or the buttons won't work.</strong></p>
<p>So using those is easy, as the <code class=language-javascript>"today"</code> and <code class=language-javascript>"today commit"</code> examples <a href=#introduction>above</a>. Using <code class=language-javascript>"close"</code> is similar:</p>
<code class=language-javascript>['close']</code>: <input id=6>
<script class=demo>
flexcalReady.then(function(){
	$('#6').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#6'),
		buttons: ['close']
	});
});
</script>
<br /><code class=language-javascript>['close commit']</code>: <input id=7>
<script class=demo>
flexcalReady.then(function(){
	$('#7').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#7'),
		buttons: ['close commit']
	});
});
</script>
<p>Using <a href=http://fortawesome.github.io/Font-Awesome/">FontAwesome icons</a> is also easy:</p>
<code class=language-javascript>['fa fa-close close']</code>: <input id=8>
<script class=demo>
flexcalReady.then(function(){
	$('#8').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#8'),
		buttons: ['fa fa-close close']
	});
});
</script>
<p>Note there is no text since it is looking for <code>faText</code> (the first class listed), and that isn't defined. If you want the text, list the class with text defined first. This puts the FontAwesome icon too close to the text, so I created another class "fa-text" to space it out a bit:</p>
<code class=language-javascript>['close fa fa-close fa-text']</code>: <input id=9>
<script class=demo>
flexcalReady.then(function(){
	$('#9').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#9'),
		buttons: ['close fa fa-close fa-text']
	});
});
</script>

<p>As illustrated for "today" and "close", assigning an action to a button relies on event delegation; attach the event handler to the body element with a selector for that particular button, using the classes listed. Then you need to assign some text (either in the default localization or in each calendar localization) or an icon.</p>
<p>Note from these examples that jQuery UI CSS makes the buttons <code class=language-css>float: right</code> so the last ones are the left-most ones.</p>
<input id=10 />
<script class=demo>
$('body').on('click', '.ui-flexcal button.happy', window.alert.bind(window, 'Have a Nice Day!'));
flexcalReady.then(function(){
	$('#10').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#10'),
		l10n: {happyText: 'Happy!'},
		buttons: [
			'happy', // text only
			'happy fa fa-smile-o fa-text', // text and FontAwesome icon
			'fa fa-smile-o happy', // FontAwesome icon only
		]
	});
});
</script>
<br />jQuery UI icons: <input id=11 />
<script class=demo>
flexcalReady.then(function(){
	// jQuery UI icons are not very pretty and are harder to use with text and icons,
	// and they impose CSS rules that change the buttons themselves
	$('#11').flexcal({
		calendars: ['en', ['fr', 'Français']],
		box: $('<div>').addClass('example').insertAfter('#11'),
		l10n: {happyText: 'Happy!'},
		buttons: [
			'happy', // text only
			'ui-icon ui-icon-check happy', // jQuery UI icon only
		]
	});
});
</script>
<p>Localization is done by putting the text for each locale into the <a href=options.html#calendars>calendars</code></a> option:</p>
<input id=12 />
<script class=demo>
var smiley = $('<img>').attr('src', smileyURL).
	css({position: 'absolute', zIndex: 10, opacity: 0.5, pointerEvents: 'none'}).
	hide().
	appendTo('body');
$('body').on ('click', '.ui-flexcal button.smile', function(evt){
	var widget = $.data(this.parentNode, 'flexcal').widget;
	smiley.toggle().position( {of: widget} );
});	
$('body').on('flexcalhidden', 'input', $.fn.hide.bind(smiley));

flexcalReady.then(function(){
	$('#12').flexcal({
		box: $('<div>').addClass('example').insertAfter('#12'),
		calendars: [
			['en', {smileText: 'Smile!'}],
			['fr', {name: 'Français', smileText: 'Souriez!'}]
		],
		buttons: ['smile']
	});
});
</script>
<p>The localization is not specific to buttons; anything with the <code>data-flexcal-l10n</code> attribute is localized:</p>
<input id=13>
<script class=demo>
var hidetabs3 = $('<label><input type=checkbox /> <span data-flexcal-l10n=hide></span></label>');
hidetabs3.find('input').on('change', function(){
	var element = $(this).parents('.ui-datepicker-buttonpane').data('flexcal').element;
	element.flexcal('option', 'hidetabs', $(this).is(':checked'));
});
flexcalReady.then(function(){
	$('#13').flexcal({
		calendars: [
			['en', {hideText: 'Hide Tabs'}],
			['fr', {name: 'Français', hideText: 'Masquez les Onglets'}]
		],
		box: $('<div>').addClass('example').insertAfter('#13'),
		buttons: [hidetabs3, 'today']
	});
});</script>

     </section>
      <footer>
		<p>Comments? Questions? Create an <a href=https://github.com/dwachss/flexcal/issues>issue</a>!</p>
		<p><small><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"></a> This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 License</a>.</small></p>
        <p><small>Hosted on GitHub Pages&mdash;Theme Based on Minimalist by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
 </body>
</html>